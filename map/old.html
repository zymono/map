<!-- <!DOCTYPE html>
<html>
<head>
  <title>World Map Example</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.css" />
  <style>
    #map {
      height: 100%;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.js"></script>
  <script>
    // Initialize the map
    var map = L.map('map').setView([0, 0], 2); // Centered at [latitude, longitude], with zoom level 2

    // Add the tile layer from OpenStreetMap
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
      maxZoom: 18,
    }).addTo(map);

        function updateMapSize() {
      var mapContainer = document.getElementById('map');
      mapContainer.style.height = window.innerHeight + 'px';
      map.invalidateSize();
    }

    // Call the updateMapSize function initially and on window resize
    updateMapSize();
    window.addEventListener('resize', updateMapSize);
  </script>
</body>
</html>
 -->
 <!DOCTYPE html>
<html>
<head>
  <title>World Map with Search</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.css" />
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }

    #map {
      height: 100%;
    }

    .search-container {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 1000;
    }

    .search-input {
      width: 300px;
      padding: 5px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <div class="search-container">
    <input type="text" id="search-input" class="search-input" placeholder="Enter a city name" />
    <button id="search-button">Search</button>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.js"></script>
  <script>
    var map = L.map('map').setView([0, 0], 2);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
      maxZoom: 18,
    }).addTo(map);

    var searchInput = document.getElementById('search-input');
    var searchButton = document.getElementById('search-button');

    searchButton.addEventListener('click', function() {
      var query = searchInput.value;
      geocode(query);
    });

    function geocode(query) {
      var apiKey = '2bb69d2986d544d98d5002b20ee83ab9';
      var apiUrl = 'https://api.opencagedata.com/geocode/v1/json?q=' + encodeURIComponent(query) + '&key=' + apiKey;

      fetch(apiUrl)
        .then(function(response) {
          return response.json();
        })
        .then(function(data) {
          if (data.results.length > 0) {
            var result = data.results[0];
            var coordinates = [result.geometry.lat, result.geometry.lng];
            var name = result.formatted;

            map.setView(coordinates, 10); // Set the map view to the geocoded coordinates

            // L.marker(coordinates).addTo(map)
            //   .bindPopup(name)
            //   .openPopup();
          } else {
            alert('Location not found.');
          }
        })
        .catch(function(error) {
          console.error('Error:', error);
        });
    }
  </script>
</body>
</html>
